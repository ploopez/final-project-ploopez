name: 'Build and Push Docker Image'
description: 'Builds and pushes a Docker image to a container registry'
inputs:
  version:
    description: 'The version for the Docker image'
    required: true


runs:
  using: 'composite'
  steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Build and Push Docker Image
      run: |
        echo "Building Docker image with version: ${{ inputs.version }}"
        docker build -t plopez/app-plopez:${{ inputs.version }} aplicativo/aplicativoNuevo/.
        docker version plopez/app-plopez:${{ inputs.version }} acrplopezfp2.azurecr.io/app-plopez:${{ inputs.version }}
        az acr login --name acrplopezfp2
        docker push acrplopezfp2.azurecr.io/app-plopez:${{ inputs.version }}
      shell: bash
    
